# TODO

开发任务清单

## 稳定性/正确性

- [x] 下载完整性
  - [x] 对旧格式无哈希资源增加大小校验或二次校验策略
  - [x] 支持断点续传（Range / 临时文件合并），避免大文件重下
- [ ] 错误反馈
  - [ ] 下载错误/回退失败的用户可读提示与重试入口
  - [ ] 启动失败时的详细原因展示（缺库/JSON 解析/参数拼装/Java 不可用）
- [x] 配置一致性
  - [x] 统一 load_config/save_config（lib.rs 与 launcher.rs 存在重复实现），以避免不一致
  - [x] SettingsView中“版本隔离”开关与后端联动
- [ ] 文件校验
  - [ ] validate_version_files 对 natives 的多格式兼容与更详细缺失项提示
  - [ ] 启动前再次快速校验关键文件，避免运行期报错

## 体验优化

- [ ] 下载体验
  - [ ] 暂停/继续下载
  - [ ] 并发线程动态调节（下载中调整生效）
  - [ ] 任务队列（多版本排队下载）
  - [ ] 下载日志查看与导出
- [ ] UI/交互
  - [ ] 主页显示游戏目录容量/占用统计（GameDirInfo.total_size 计算实现）
  - [ ] 下载页支持显示每项资源具体大小与已获得大小
  - [ ] 下载完成后快捷操作（安装/校验/打开版本目录）
- [ ] 设置页
  - [ ] “打开目录”按钮（游戏目录、logs、versions）
  - [ ] Java 版本信息展示（vendor/version）
  - [ ] Max Memory 限制规则适配不同系统（比如保留系统内存比例可配置）

## 功能扩展

- [ ] 版本管理
  - [ ] 支持 Forge/Fabric/Quilt 等 Mod Loader 下载与安装
  - [ ] 版本隔离策略细化（可配置 assets/resourcepacks/logs 的复用/隔离）
- [ ] 账户体系
  - [ ] 正式版登录（微软 OAuth）与离线模式的切换
  - [ ] 用户/配置多档位（Profile）
- [ ] 多语言
  - [ ] i18n（zh-CN/en-US），UI 文案与后端消息统一抽取
- [ ] 诊断工具
  - [ ] 一键生成诊断包（配置、关键日志、环境信息）

## 构建与分发

- [ ] 打包流程
  - [ ] CI/CD（GitHub Actions）构建多平台产物（Windows/msi、macOS/dmg、Linux/AppImage）
  - [ ] Windows 代码签名、macOS 签名与公证流程文档
- [ ] 体积与性能
  - [ ] 精简依赖
  - [ ] 下载与校验的异步/IO调度优化与profile

## 代码质量/维护

- [ ] 日志体系
  - [ ] 统一日志落盘路径与等级，避免多处创建不同日志文件
  - [ ] 前端可开关的debug日志面板
- [ ] 类型与边界
  - [ ] 对所有tauri invoke的返回类型与错误进行类型化约束
  - [ ] 对可能的null/undefined/空数组场景做UI兜底
- [ ] 文档
  - [ ] README英文版
  - [ ] API/事件清单自动生成（从Rust注解或代码解析）

## 技术问题

- [ ] 校验算法目前使用 SHA1（与官方一致），可选增加 SHA256 校验增强安全性
- [ ] 资源索引文件（assets index）缓存策略与过期更新逻辑可明确化